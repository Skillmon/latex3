%
% Copyright (C) 2020 The LaTeX3 Project
%
\input{regression-test}

\RequirePackage[enable-debug]{expl3}
\ExplSyntaxOn
\debug_on:n { check-declarations , deprecation , log-functions }
\ExplSyntaxOff

\START
\AUTHOR{Jonathan P. Spratte}
\ExplSyntaxOn

\TESTEXP { tl~replace~token }
  {
    \tl_replace_token:nNn { abcd }    a { \YES }   \NEWLINE
    \tl_replace_token:nNn { {a}bcd }  a { \ERROR } \NEWLINE
    \tl_replace_token:nNn { #bcd }    # { \YES }   \NEWLINE
    \tl_replace_token:nNn { $bcd }    $ { \YES }   \NEWLINE
    \tl_replace_token:nNn { ^bcd }    ^ { \YES }   \NEWLINE
    \tl_replace_token:nNn { &bcd }    & { \YES }   \NEWLINE
    \tl_replace_token:nNn { a~b~c~d } a { \YES }   \NEWLINE
    \tl_replace_token:nNn { a~b~a~d } a { \YES }   \NEWLINE
  }

\TESTEXP { tl~replace~token~deep }
  {
    \tl_replace_token_deep:nNn { abcd }     a { \YES } \NEWLINE
    \tl_replace_token_deep:nNn { {a}bcd }   a { \YES } \NEWLINE
    \tl_replace_token_deep:nNn { {#{#}c}d } # { \YES } \NEWLINE
  }

\END
